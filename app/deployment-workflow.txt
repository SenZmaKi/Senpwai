to-dos: 
        ensure all http requests have been wrapped around network_error_retry_wrapper
        remove testing crap, search string "for testing" 
        update VERSION in global variable and metadata.yml
        remove all modules to avoid shipping modules used during devt and testing
        generate clean requirements.txt
        install modules in requirements.txt
        generate file_version_info.txt
        build exe
        test exe
        compile to installer     
        test installer
        ensure all changes have been committed and pushed to github
        publish release on github


build: directory: app/
       command: pyinstaller --windowed --name=Senpwai --icon=assets\senpwai-icon.ico --add-data "assets;assets" --version-file=file_version_info.txt --noconfirm senpwai.py

requirements.txt-gen: directory: app/ 
                       command: pigar generate

file_version_info.txt-gen: directory: app/
                           command: create-version-file metadata.yml --outfile file_version_info.txt

remove-all-modules: command: pip freeze | % {pip uninstall -y $_.split('==')[0]}

install-modules: directory: app/
                command: pip install -r requirements.txt

test-exe: directory: app/dist/Senpwai
          command: ./Senpwai
          tasks: - delete-Senpwai-config-dir: directory: %appdata%\..\Local\Senpwai
                 - check memory usage    
                 - check cpu usage
                 - check disk usage
                 - check network usage

compile-installer: directory: app/
                   command: ./inno-setup.iss
                   tasks: - update version, !!! MyAppversion, VersionInfoVersion
